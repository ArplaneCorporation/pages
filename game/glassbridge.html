<!DOCTYPE html>
<html>
  <head>
    <title>Glass Jump AR</title>
    <meta charset="utf-8" />
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <script src="https://rawcdn.githack.com/jeromeetienne/ar.js/3.3.2/aframe/build/aframe-ar-nft.min.js"></script>
  </head>
  <body style="margin: 0; overflow: hidden;">
    <a-scene
      vr-mode-ui="enabled: false"
      embedded
      arjs="sourceType: webcam; debugUIEnabled: false;"
    >
      <!-- กล้อง -->
      <a-camera gps-camera rotation-reader></a-camera>

      <!-- ปุ่มเฉลย -->
      <a-entity
        id="revealButton"
        position="0 2 -5"
        geometry="primitive: plane; height: 0.5; width: 2"
        material="color: orange"
        text="value: เฉลย; align: center; color: black"
        class="clickable"
      ></a-entity>
    </a-scene>

    <script>
      const scene = document.querySelector('a-scene');
      const correctPath = [0, 1, 0, 1, 1, 0, 0, 1, 0, 1]; // 0=ซ้าย, 1=ขวา

      function createGlass(step) {
        const zPos = -step * 2 - 5;
        const color = '#4CC3D9';

        const leftGlass = document.createElement('a-box');
        leftGlass.setAttribute('position', `-0.8 0 ${zPos}`);
        leftGlass.setAttribute('width', '0.8');
        leftGlass.setAttribute('height', '0.05');
        leftGlass.setAttribute('depth', '0.8');
        leftGlass.setAttribute('color', color);
        leftGlass.setAttribute('id', `glass-${step}-0`);

        const rightGlass = document.createElement('a-box');
        rightGlass.setAttribute('position', `0.8 0 ${zPos}`);
        rightGlass.setAttribute('width', '0.8');
        rightGlass.setAttribute('height', '0.05');
        rightGlass.setAttribute('depth', '0.8');
        rightGlass.setAttribute('color', color);
        rightGlass.setAttribute('id', `glass-${step}-1`);

        scene.appendChild(leftGlass);
        scene.appendChild(rightGlass);
      }

      for (let i = 0; i < 10; i++) {
        createGlass(i);
      }

      document.getElementById('revealButton').addEventListener('click', () => {
        for (let i = 0; i < correctPath.length; i++) {
          const correctId = `glass-${i}-${correctPath[i]}`;
          const correctGlass = document.getElementById(correctId);
          if (correctGlass) {
            correctGlass.setAttribute('color', '#4CAF50');
          }
        }
      });
    </script>
  </body>
</html>